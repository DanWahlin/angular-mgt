<app-header (userLoggedIn)="userLoggedIn($event)"></app-header>

<main>
    <div *ngIf="loggedIn">
        <app-customers-list [customers]="customers" (customerSelected)="customerSelected($event)"></app-customers-list>
        <div *ngIf="selectedCustomer">
            <h2>{{ selectedQueryText }} Content</h2>

            <app-filter-textbox [filter]="selectedQueryText" [label]="'Content Filter:'" (changed)="filter($event)"></app-filter-textbox>
            <br /><br />

            <mat-accordion multi>
                <mat-expansion-panel hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <mat-icon svgIcon="email"></mat-icon> Files ({{ contentCounts.files }})
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-files [searchText]="selectedQueryText" (dataLoaded)="dataLoaded('files', $event)"></app-files>
                </mat-expansion-panel>

                <mat-expansion-panel hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <mat-icon svgIcon="chat"></mat-icon> Chats ({{ contentCounts.chats }})
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-chats [searchText]="selectedQueryText" (dataLoaded)="dataLoaded('chats', $event)"></app-chats>
                </mat-expansion-panel>

                <mat-expansion-panel hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <mat-icon svgIcon="email"></mat-icon> Emails ({{ contentCounts.emails }})
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-emails [searchText]="selectedQueryText" (dataLoaded)="dataLoaded('emails', $event)"></app-emails>
                </mat-expansion-panel>

                <mat-expansion-panel hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <mat-icon svgIcon="agenda"></mat-icon> Agenda Items ({{ contentCounts.agendaEvents }})
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-agenda [searchText]="selectedQueryText" (dataLoaded)="dataLoaded('agendaEvents', $event)"></app-agenda>
                </mat-expansion-panel>
            </mat-accordion>
        </div>
    </div>
    <div *ngIf="!loggedIn">
        Please Sign In
    </div>
</main>

<router-outlet></router-outlet>